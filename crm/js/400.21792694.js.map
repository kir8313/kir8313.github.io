{"version":3,"file":"js/400.21792694.js","mappings":"gMAESA,MAAM,c,GACTC,EAAAA,EAAAA,GAAqB,UAAjB,gBAAY,G,SAMaD,MAAM,U,WAAS,yB,WAEd,4B,aASvBA,MAAM,Y,qHAnBjBE,EAAAA,EAAAA,IA4BM,aA3BJD,EAAAA,EAAAA,GAGM,MAHN,EAGM,CAFJE,GACAF,EAAAA,EAAAA,GAAoC,WAAAG,EAAAA,EAAAA,IAA7BC,EAAAA,UAAUA,EAAAA,KAAKC,QAAK,KAGfC,EAAAA,YAAAA,EAAAA,EAAAA,OAAdC,EAAAA,EAAAA,IAA0BC,EAAA,CAAAC,IAAAA,KAEXH,EAAAA,QAAQI,SAAvB,WAKAT,EAAAA,EAAAA,IAcU,UAAAU,EAAA,gBAbRV,EAAAA,EAAAA,IAYMW,EAAAA,GAAA,MAAAC,EAAAA,EAAAA,IAZgBP,EAAAA,SAAVQ,K,WAAZb,EAAAA,EAAAA,IAYM,OAZ0BQ,IAAKK,EAAOC,IAA5C,EACEf,EAAAA,EAAAA,GAGI,WAFFA,EAAAA,EAAAA,GAAmC,eAAAG,EAAAA,EAAAA,IAAxBW,EAAOE,OAAK,IAErB,QAFiC,KACnCb,EAAAA,EAAAA,IAAGC,EAAAA,UAAUU,EAAOG,QAAS,QAAId,EAAAA,EAAAA,IAAGC,EAAAA,UAAUU,EAAOI,QAAK,MAF5D,qBAIAjB,EAAAA,EAAAA,IAMM,MANN,EAMM,EALJD,EAAAA,EAAAA,GAIO,OAHLD,OAAK,SAAC,cAAa,CACVe,EAAOK,iBACfC,OAAK,SAAAC,MAAUP,EAAOQ,mBAHzB,WADF,IAAiCR,EAAOS,gBAL1C,WANqBb,EAAAA,EAAAA,OAAvBT,EAAAA,EAAAA,IAGI,IAHJ,EAGI,IADFuB,EAAAA,EAAAA,IAAoEC,EAAA,CAAvDC,GAAG,eAAa,C,kBAAC,IAAwB,M,iCAyB5D,GACEC,WAAY,CAACC,OAAAA,EAAAA,GACbC,OACE,MAAO,CACLC,WAAW,EACXC,QAAS,KAGbC,SAAU,KACLC,EAAAA,EAAAA,IAAW,CAAC,aAAc,UAE/BC,sBACQC,KAAKC,OAAOC,SAAS,iBAC3B,MAAMN,QAAgBI,KAAKC,OAAOC,SAAS,cAEvCN,IACFI,KAAKJ,QAAUI,KAAKG,WAAWC,KAAIC,IACjC,MAAMvB,EAAQc,EACXU,QAAO3B,GAAUA,EAAOC,KAAOyB,EAASzB,KACxC0B,QAAO3B,GAA+B,YAArBA,EAAO4B,YACxBC,QAAO,CAACC,EAAOC,IAAcD,EAASC,EAAU/B,QAAQ,GAErDgC,EAAeN,EAAStB,MAAQD,EAChCM,EAAUuB,GAAgB,EAAK,wBAAuBX,KAAKY,UAAUD,KAAkB,mBAAkBX,KAAKY,UAAUC,KAAKC,IAAIH,MACjII,EAAU,IAAMjC,EAAQuB,EAAStB,MACjCI,EAAkB4B,GAAW,IAAM,OAASA,EAAU,IACtD/B,EAAgB+B,EAAU,GAAK,QAAUA,EAAU,IAAM,SAAW,MAE1E,MAAO,IACFV,EAAUvB,MAAAA,EAAOK,gBAAAA,EAAiBH,cAAAA,EAAeI,QAAAA,OAK1DY,KAAKL,WAAY,I,QCjErB,MAAMqB,GAA2B,OAAgB,EAAQ,CAAC,CAAC,SAASC,KAEpE","sources":["webpack://crm-system/./src/views/Planning.vue","webpack://crm-system/./src/views/Planning.vue?4d61"],"sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"page-title\">\r\n      <h3>Планирование</h3>\r\n      <h4>{{ $currency(info.money) }}</h4>\r\n    </div>\r\n\r\n    <loader v-if=\"isLoading\"/>\r\n\r\n    <p v-else-if=\"!amounts.length\" class=\"center\">\r\n      Категорий пока нет.\r\n      <router-link to=\"/categories\">Добавьте новую категорию</router-link>\r\n    </p>\r\n\r\n    <section v-else>\r\n      <div v-for=\"amount in amounts\" :key=\"amount.id\">\r\n        <p>\r\n          <strong>{{ amount.title }}</strong>\r\n          {{ $currency(amount.spend) }} из {{ $currency(amount.limit) }}\r\n        </p>\r\n        <div class=\"progress\" v-tooltip=\"amount.tooltip\">\r\n          <div\r\n            class=\"determinate\"\r\n            :class=\"[amount.progressColor]\"\r\n            :style=\"{width: amount.progressPercent}\"\r\n          ></div>\r\n        </div>\r\n      </div>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport {mapGetters} from \"vuex\"\r\nimport Loader from \"@/components/Loader\";\r\n\r\nexport default {\r\n  components: {Loader},\r\n  data() {\r\n    return {\r\n      isLoading: true,\r\n      amounts: []\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters(['categories', 'info'])\r\n  },\r\n  async mounted() {\r\n    await this.$store.dispatch('getCategories');\r\n    const amounts = await this.$store.dispatch('getAmounts');\r\n\r\n    if (amounts) {\r\n      this.amounts = this.categories.map(category => {\r\n        const spend = amounts\r\n          .filter(amount => amount.id === category.id)\r\n          .filter(amount => amount.typeMoney === \"outcome\")\r\n          .reduce((accum, nextValue) => accum += nextValue.amount, 0);\r\n\r\n        const tooltipMoney = category.limit - spend;\r\n        const tooltip = tooltipMoney >= 0 ? `На балансе осталось: ${this.$currency(tooltipMoney)}`: `Вы превысили на ${this.$currency(Math.abs(tooltipMoney))}`\r\n        const percent = 100 * spend / category.limit;\r\n        const progressPercent = percent >= 100 ? '100%' : percent + '%';\r\n        const progressColor = percent < 60 ? \"green\" : percent < 100 ? 'yellow' : 'red';\r\n\r\n        return {\r\n          ...category, spend, progressPercent, progressColor, tooltip\r\n        }\r\n      })\r\n    }\r\n\r\n    this.isLoading = false;\r\n  }\r\n}\r\n</script>\r\n","import { render } from \"./Planning.vue?vue&type=template&id=095eadc8\"\nimport script from \"./Planning.vue?vue&type=script&lang=js\"\nexport * from \"./Planning.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\cmg-user\\\\Desktop\\\\все\\\\Школа Минина\\\\vue\\\\13- курсовые\\\\99-crm-system\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["class","_createElementVNode","_createElementBlock","_hoisted_2","_toDisplayString","_ctx","money","$data","_createBlock","_component_loader","key","length","_hoisted_6","_Fragment","_renderList","amount","id","title","spend","limit","progressColor","style","width","progressPercent","tooltip","_createVNode","_component_router_link","to","components","Loader","data","isLoading","amounts","computed","mapGetters","async","this","$store","dispatch","categories","map","category","filter","typeMoney","reduce","accum","nextValue","tooltipMoney","$currency","Math","abs","percent","__exports__","render"],"sourceRoot":""}