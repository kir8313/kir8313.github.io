"use strict";(self["webpackChunkcrm_system"]=self["webpackChunkcrm_system"]||[]).push([[400],{400:function(e,t,s){s.r(t),s.d(t,{default:function(){return k}});var r=s(3396),i=s(7139);const n={class:"page-title"},o=(0,r._)("h3",null,"Планирование",-1),c={key:1,class:"center"},l=(0,r.Uk)(" Категорий пока нет. "),a=(0,r.Uk)("Добавьте новую категорию"),u={key:2},d={class:"progress"};function g(e,t,s,g,p,m){const w=(0,r.up)("loader"),y=(0,r.up)("router-link"),h=(0,r.Q2)("tooltip");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",n,[o,(0,r._)("h4",null,(0,i.zw)(e.$currency(e.info.money)),1)]),p.isLoading?((0,r.wg)(),(0,r.j4)(w,{key:0})):p.amounts.length?((0,r.wg)(),(0,r.iD)("section",u,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(p.amounts,(t=>((0,r.wg)(),(0,r.iD)("div",{key:t.id},[(0,r._)("p",null,[(0,r._)("strong",null,(0,i.zw)(t.title),1),(0,r.Uk)(" "+(0,i.zw)(e.$currency(t.spend))+" из "+(0,i.zw)(e.$currency(t.limit)),1)]),(0,r.wy)(((0,r.wg)(),(0,r.iD)("div",d,[(0,r._)("div",{class:(0,i.C_)(["determinate",[t.progressColor]]),style:(0,i.j5)({width:t.progressPercent})},null,6)])),[[h,t.tooltip]])])))),128))])):((0,r.wg)(),(0,r.iD)("p",c,[l,(0,r.Wm)(y,{to:"/categories"},{default:(0,r.w5)((()=>[a])),_:1})]))])}var p=s(65),m=s(1033),w={components:{Loader:m.Z},data(){return{isLoading:!0,amounts:[]}},computed:{...(0,p.Se)(["categories","info"])},async mounted(){await this.$store.dispatch("getCategories");const e=await this.$store.dispatch("getAmounts");e&&(this.amounts=this.categories.map((t=>{const s=e.filter((e=>e.id===t.id)).filter((e=>"outcome"===e.typeMoney)).reduce(((e,t)=>e+t.amount),0),r=t.limit-s,i=r>=0?`На балансе осталось: ${this.$currency(r)}`:`Вы превысили на ${this.$currency(Math.abs(r))}`,n=100*s/t.limit,o=n>=100?"100%":n+"%",c=n<60?"green":n<100?"yellow":"red";return{...t,spend:s,progressPercent:o,progressColor:c,tooltip:i}}))),this.isLoading=!1}},y=s(89);const h=(0,y.Z)(w,[["render",g]]);var k=h}}]);
//# sourceMappingURL=400.21792694.js.map